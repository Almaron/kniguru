  [1m[36m (56.6ms)[0m  [1mCREATE TABLE "schema_migrations" ("version" varchar(255) NOT NULL) [0m
  [1m[35m (45.8ms)[0m  CREATE UNIQUE INDEX "unique_schema_migrations" ON "schema_migrations" ("version")
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to SorceryCore (20130516083105)
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (1.5ms)[0m  [1mCREATE TABLE "users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "username" varchar(255) NOT NULL, "email" varchar(255), "crypted_password" varchar(255), "salt" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35mSQL (99.7ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES (?)  [["version", "20130516083105"]]
  [1m[36m (42.5ms)[0m  [1mcommit transaction[0m
Migrating to SorceryUserActivation (20130516085957)
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (2.8ms)[0m  [1mALTER TABLE "users" ADD "activation_state" varchar(255)[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "users" ADD "activation_token" varchar(255)
  [1m[36m (0.2ms)[0m  [1mALTER TABLE "users" ADD "activation_token_expires_at" datetime[0m
  [1m[35m (0.3ms)[0m  CREATE INDEX "index_users_on_activation_token" ON "users" ("activation_token")
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20130516085957"]]
  [1m[35m (66.7ms)[0m  commit transaction
Migrating to SorceryRememberMe (20130516085958)
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (1.5ms)[0m  ALTER TABLE "users" ADD "remember_me_token" varchar(255)
  [1m[36m (0.3ms)[0m  [1mALTER TABLE "users" ADD "remember_me_token_expires_at" datetime[0m
  [1m[35m (0.2ms)[0m  CREATE INDEX "index_users_on_remember_me_token" ON "users" ("remember_me_token")
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20130516085958"]]
  [1m[35m (16.6ms)[0m  commit transaction
Migrating to SorceryExternal (20130516085959)
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (55.6ms)[0m  CREATE TABLE "authentications" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer NOT NULL, "provider" varchar(255) NOT NULL, "uid" varchar(255) NOT NULL, "created_at" datetime, "updated_at" datetime) 
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20130516085959"]]
  [1m[35m (50.9ms)[0m  commit transaction
Migrating to SorceryResetPassword (20130516090106)
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (3.5ms)[0m  ALTER TABLE "users" ADD "reset_password_token" varchar(255)
  [1m[36m (0.3ms)[0m  [1mALTER TABLE "users" ADD "reset_password_token_expires_at" datetime[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "users" ADD "reset_password_email_sent_at" datetime
  [1m[36m (0.2ms)[0m  [1mCREATE INDEX "index_users_on_reset_password_token" ON "users" ("reset_password_token")[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES (?)  [["version", "20130516090106"]]
  [1m[36m (46.5ms)[0m  [1mcommit transaction[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.2ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
  [1m[36m (0.8ms)[0m  [1mbegin transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to AddIndexToAuthentications (20130516091911)
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (4.7ms)[0m  [1mCREATE UNIQUE INDEX "index_authentications_on_provider_and_uid" ON "authentications" ("provider", "uid")[0m
  [1m[35mSQL (3.6ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES (?)  [["version", "20130516091911"]]
  [1m[36m (20.8ms)[0m  [1mcommit transaction[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.2ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to CreateProfiles (20130516101134)
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (4.3ms)[0m  [1mCREATE TABLE "profiles" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer, "created_at" datetime, "updated_at" datetime) [0m
  [1m[35mSQL (3.9ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES (?)  [["version", "20130516101134"]]
  [1m[36m (21.1ms)[0m  [1mcommit transaction[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.2ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to AddAvatarToUser (20130516103122)
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (73.3ms)[0m  [1mALTER TABLE "users" ADD "avatar" varchar(255)[0m
  [1m[35mSQL (5.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES (?)  [["version", "20130516103122"]]
  [1m[36m (11.9ms)[0m  [1mcommit transaction[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.2ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to CreateSeasons (20130516145721)
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (81.0ms)[0m  [1mCREATE TABLE "seasons" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255), "start_on" date, "end_on" date, "created_at" datetime, "updated_at" datetime) [0m
  [1m[35mSQL (77.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES (?)  [["version", "20130516145721"]]
  [1m[36m (36.0ms)[0m  [1mcommit transaction[0m
Migrating to CreateBooks (20130516145916)
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (4.2ms)[0m  [1mCREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer, "season_id" integer, "title" varchar(255), "head" varchar(255), "description" text, "full_text" text, "cover" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35mSQL (25.3ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES (?)  [["version", "20130516145916"]]
  [1m[36m (381.2ms)[0m  [1mcommit transaction[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.2ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
  [1m[36m (0.9ms)[0m  [1mbegin transaction[0m
  [1m[35mSeason Load (0.2ms)[0m  SELECT "seasons".* FROM "seasons" WHERE (start_on <= '2013-05-16') ORDER BY "seasons"."id" DESC LIMIT 1
  [1m[36mSeason Load (0.3ms)[0m  [1mSELECT "seasons".* FROM "seasons" WHERE (start_on <= '2013-05-16') ORDER BY "seasons"."start_on" ASC LIMIT 1[0m
  [1m[35mSeason Load (0.2ms)[0m  SELECT "seasons".* FROM "seasons" WHERE (start_on <= '2013-05-16') ORDER BY "seasons"."start_on" DESC LIMIT 1
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to AddBooktmateIdToBooks (20130516154255)
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (80.5ms)[0m  [1mALTER TABLE "books" ADD "bookmate_id" integer[0m
  [1m[35mSQL (6.0ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES (?)  [["version", "20130516154255"]]
  [1m[36m (88.1ms)[0m  [1mcommit transaction[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.2ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to CreateComments (20130517164821)
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (12.2ms)[0m  [1mCREATE TABLE "comments" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer, "commentable_id" integer, "commentable_type" varchar(255), "text" text, "mark" integer, "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.2ms)[0m  CREATE INDEX "index_comments_on_commentable_id_and_commentable_type" ON "comments" ("commentable_id", "commentable_type")
  [1m[36m (0.2ms)[0m  [1mCREATE INDEX "index_comments_on_user_id" ON "comments" ("user_id")[0m
  [1m[35mSQL (5.3ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES (?)  [["version", "20130517164821"]]
  [1m[36m (26.8ms)[0m  [1mcommit transaction[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.2ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.2ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to CreateBookTracks (20130519062002)
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (3.2ms)[0m  [1mCREATE TABLE "book_tracks" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer, "book_id" integer, "status" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35mSQL (5.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES (?)  [["version", "20130519062002"]]
  [1m[36m (16.6ms)[0m  [1mcommit transaction[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.2ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
  [1m[36m (67.9ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to CreateBadges (20130519172956)
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (82.0ms)[0m  [1mCREATE TABLE "badges" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "description" varchar(255), "image" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35mSQL (5.3ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES (?)  [["version", "20130519172956"]]
  [1m[36m (73.1ms)[0m  [1mcommit transaction[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.2ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to CreateUserBadges (20130519173816)
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (6.4ms)[0m  [1mCREATE TABLE "user_badges" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer, "badge_id" integer, "created_at" datetime, "updated_at" datetime) [0m
  [1m[35mSQL (4.5ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES (?)  [["version", "20130519173816"]]
  [1m[36m (68.5ms)[0m  [1mcommit transaction[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.3ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.2ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.2ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
  [1m[36m (6.2ms)[0m  [1mbegin transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to CreateBookRates (20130522172610)
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (2.7ms)[0m  [1mCREATE TABLE "book_rates" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer, "book_id" integer, "rate" integer, "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (12.5ms)[0m  CREATE UNIQUE INDEX "index_book_rates_on_user_id_and_book_id" ON "book_rates" ("user_id", "book_id")
  [1m[36m (0.2ms)[0m  [1mCREATE INDEX "index_book_rates_on_book_id" ON "book_rates" ("book_id")[0m
  [1m[35mSQL (4.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES (?)  [["version", "20130522172610"]]
  [1m[36m (5017.5ms)[0m  [1mcommit transaction[0m
SQLite3::BusyException: database is locked: commit transaction
  [1m[35m (1.4ms)[0m  rollback transaction
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.9ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to CreateBookRates (20130522172610)
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (80.1ms)[0m  [1mCREATE TABLE "book_rates" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer, "book_id" integer, "rate" integer, "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (2.5ms)[0m  CREATE UNIQUE INDEX "index_book_rates_on_user_id_and_book_id" ON "book_rates" ("user_id", "book_id")
  [1m[36m (0.2ms)[0m  [1mCREATE INDEX "index_book_rates_on_book_id" ON "book_rates" ("book_id")[0m
  [1m[35mSQL (75.9ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES (?)  [["version", "20130522172610"]]
  [1m[36m (23.5ms)[0m  [1mcommit transaction[0m
Migrating to AddTypeToBadges (20130523103142)
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (6.0ms)[0m  [1mALTER TABLE "badges" ADD "type" varchar(255)[0m
  [1m[35m (0.3ms)[0m  CREATE INDEX "index_badges_on_type" ON "badges" ("type")
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20130523103142"]]
  [1m[35m (71.1ms)[0m  commit transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36m (1.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to CreateNews (20130524055056)
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (10.2ms)[0m  [1mCREATE TABLE "news" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "head" varchar(255), "text" varchar(255), "image" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35mSQL (5.7ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES (?)  [["version", "20130524055056"]]
  [1m[36m (19.2ms)[0m  [1mcommit transaction[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.2ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to CreateTracks (20130524083325)
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (2.1ms)[0m  [1mCREATE TABLE "tracks" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer, "trackable_id" integer, "trackable_type" varchar(255), "count" integer, "created_at" datetime, "updated_at" datetime) [0m
  [1m[35mSQL (6.6ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES (?)  [["version", "20130524083325"]]
  [1m[36m (11.2ms)[0m  [1mcommit transaction[0m
Migrating to AddSentToTracks (20130627165515)
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (2.1ms)[0m  [1mALTER TABLE "tracks" ADD "sent" integer DEFAULT 0[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES (?)  [["version", "20130627165515"]]
  [1m[36m (7.5ms)[0m  [1mcommit transaction[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.2ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
  [1m[36m (1.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (80.7ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (1.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to CreateSubscriptions (20130627180111)
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36m (78.2ms)[0m  [1mCREATE TABLE "subscriptions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer, "hour" integer, "day" integer, "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.2ms)[0m  CREATE INDEX "index_subscriptions_on_user_id" ON "subscriptions" ("user_id")
  [1m[36mSQL (69.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20130627180111"]]
  [1m[35m (15.4ms)[0m  commit transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to CreateAuthentications (20130628164556)
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.3ms)[0m  [1mCREATE TABLE "authentications" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer, "provider" varchar(255), "uid" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
SQLite3::SQLException: table "authentications" already exists: CREATE TABLE "authentications" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer, "provider" varchar(255), "uid" varchar(255), "created_at" datetime, "updated_at" datetime) 
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.2ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
  [1m[36m (22.4ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (3.4ms)[0m  UPDATE "tracks" SET "count" = 5 WHERE "tracks"."trackable_id" = 5 AND "tracks"."trackable_type" = 'news'
  [1m[36m (1.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (1.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.3ms)[0m  rollback transaction
